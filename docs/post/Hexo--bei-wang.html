<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark_colorblind" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://source.314926.xyz/assets/primer.css' rel='stylesheet' />
    <script src='https://source.314926.xyz/assets/GmeekVercount.js'></script>
    <link rel="icon" href="https://cn.cravatar.com/avatar/1F6C8947D35A8186A1647009BA8BC5F2?size=256"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="# Hexo 备忘

## 我的配置
1. **Hexo 版本**: hexo-cli: 4.3.2, hexo: 7.3.0(当前最新)
2. **Node.js 版本**: 22.16.0
3. **Git 版本**: 2.47.0.sindows.2
4. **PNPM 版本**: 10.12.4
5. **Windows 版本**: 11

## 安装 Node.js

1. 在 [官网](https://nodejs.org/en/download/) 安装 LTS 版本，电脑一般来说内存足够直接在 C 盘即可，当然，换路径也可以，我反正正常下载换路径，没什么问题。">
<meta property="og:title" content="Hexo-备忘">
<meta property="og:description" content="# Hexo 备忘

## 我的配置
1. **Hexo 版本**: hexo-cli: 4.3.2, hexo: 7.3.0(当前最新)
2. **Node.js 版本**: 22.16.0
3. **Git 版本**: 2.47.0.sindows.2
4. **PNPM 版本**: 10.12.4
5. **Windows 版本**: 11

## 安装 Node.js

1. 在 [官网](https://nodejs.org/en/download/) 安装 LTS 版本，电脑一般来说内存足够直接在 C 盘即可，当然，换路径也可以，我反正正常下载换路径，没什么问题。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://Kemiaojun.github.io/post/Hexo--bei-wang.html">
<meta property="og:image" content="https://s2.loli.net/2025/04/20/V8zWaEoxP5msqNQ.jpg">
<title>Hexo-备忘</title>
<link href="//unpkg.com/@wooorm/starry-night@2.1.1/style/both.css" rel="stylesheet" />


</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
.copy-feedback {
    display: none;
    position: absolute;
    top: 10px;
    right: 50px;
    color: var(--color-fg-on-emphasis);
    background-color: var(--color-fg-muted);
    border-radius: 3px;
    padding: 5px 8px;
    font-size: 12px;
}
</style>
<style>#postBody{font-size:20px}</style><style>.markdown-alert{padding:0.5rem 1rem;margin-bottom:1rem;border-left:.25em solid var(--borderColor-default,var(--color-border-default));}.markdown-alert .markdown-alert-title {display:flex;font-weight:var(--base-text-weight-medium,500);align-items:center;line-height:1;}.markdown-alert>:first-child {margin-top:0;}.markdown-alert>:last-child {margin-bottom:0;}</style><style>.markdown-alert.markdown-alert-note {border-left-color:var(--borderColor-accent-emphasis, var(--color-accent-emphasis));background-color:var(--color-accent-subtle);}.markdown-alert.markdown-alert-note .markdown-alert-title {color: var(--fgColor-accent,var(--color-accent-fg));}</style><style>.markdown-alert.markdown-alert-tip {border-left-color:var(--borderColor-success-emphasis, var(--color-success-emphasis));background-color:var(--color-success-subtle);}.markdown-alert.markdown-alert-tip .markdown-alert-title {color: var(--fgColor-success,var(--color-success-fg));}</style>



<body>
    <div id="header">
<h1 class="postTitle">Hexo-备忘</h1>
<div class="title-right">
    <a href="https://Kemiaojun.github.io" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/Kemiaojun/Kemiaojun.github.io/issues/16" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h1>Hexo 备忘</h1>
<h2>我的配置</h2>
<ol>
<li><strong>Hexo 版本</strong>: hexo-cli: 4.3.2, hexo: 7.3.0(当前最新)</li>
<li><strong>Node.js 版本</strong>: 22.16.0</li>
<li><strong>Git 版本</strong>: 2.47.0.sindows.2</li>
<li><strong>PNPM 版本</strong>: 10.12.4</li>
<li><strong>Windows 版本</strong>: 11</li>
</ol>
<h2>安装 Node.js</h2>
<ol>
<li>
<p>在 <a href="https://nodejs.org/en/download/" rel="nofollow">官网</a> 安装 LTS 版本，电脑一般来说内存足够直接在 C 盘即可，当然，换路径也可以，我反正正常下载换路径，没什么问题。</p>
</li>
<li>
<p>安装完成后，检查是否安装成功。在键盘按下 <kbd> win </kbd> + <kbd> R </kbd> 键，输入 <code class="notranslate">CMD</code>，然后回车，打开 CMD 窗口，执行 <code class="notranslate">node -v</code> 命令，看到版本信息，则说明安装成功。</p>
</li>
</ol>
<h2>安装 Git</h2>
<p>在 <a href="https://git-scm.com/download/win" rel="nofollow">官网</a> 安装最新版本的 <code class="notranslate">64-bit Git for Windows Setup</code> 安装包。</p>
<p>安装完成后，在命令行输入 <code class="notranslate">git --version</code>，如果显示版本号，则说明安装成功。</p>
<h3>常用命令</h3>
<div class="highlight highlight-source-shell"><pre class="notranslate">git config -l  //查看所有配置
git config --system --list //查看系统配置
git config --global --list //查看用户（全局）配置</pre></div>
<h3>配置 Git 用户名和邮箱</h3>
<div class="highlight highlight-source-shell"><pre class="notranslate">git config --global user.name <span class="pl-s"><span class="pl-pds">"</span>你的用户名<span class="pl-pds">"</span></span>
git config --global user.email <span class="pl-s"><span class="pl-pds">"</span>你的邮箱<span class="pl-pds">"</span></span></pre></div>
<h2>安装 包管理器</h2>
<p>安装 npm 为一切的基石，一般来说，你安装了 node，也相当于你安装了 npm，通过一下命令来验证：</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">npm -v
node -v</pre></div>
<p><strong>修改 npm 源</strong>。npm 下载各种模块，默认是从国外服务器下载，速度较慢，建议配置成淘宝镜像。打开 CMD 窗口，运行如下命令:</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">npm config <span class="pl-c1">set</span> registry https://registry.npm.taobao.org</pre></div>
<h3>安装 pnpm</h3>
<p>pnpm 是一个快速、节省磁盘空间的包管理器，类似于 npm 和 yarn。安装 pnpm 可以通过以下命令：</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">npm install -g pnpm</pre></div>
<p>为什么选择 pnpm？因为它的安装速度快，依赖管理更高效，且相对于 npm，我使用 npm 容易失败且慢，pnpm 给我的体验更好。</p>
<h2>安装 Hexo</h2>
<ol>
<li>在 Git BASH 输入如下命令安装 Hexo：</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm install -g hexo-cli</pre></div>
<ol start="2">
<li>安装完后输入 <code class="notranslate">hexo -v</code> 验证是否安装成功。</li>
</ol>
<hr>
<h2><a id="user-content-github-config"></a>Github配置</h2>
<blockquote>
<p>上述操作是前提，接下来是配置 Github。</p>
</blockquote>
<p>注册 github 就不说了，很基础的东西，连我个代码小白都懂就不多说了。</p>
<h3>创建仓库</h3>
<ol>
<li>登录 GitHub，点击右上角的 <code class="notranslate">+</code> 号，选择 <code class="notranslate">New repository</code>。</li>
<li>填写仓库名称，建议使用 <code class="notranslate">&lt;username&gt;.github.io</code> 格式（例如：<code class="notranslate">yourusername.github.io</code>），这样可以直接作为个人主页。</li>
</ol>
<p>这里我不准备直接使用常规的 <code class="notranslate">hexo deploy</code> 命令来部署到 GitHub Pages，因为当你的文章一多，生成时间就会繁琐，这里的建议是使用 <code class="notranslate">Github Actions</code> 来自动部署。</p>
<blockquote>
<p>这一部分的教程是源于 <a href="https://akilar.top/posts/f752c86d/" rel="nofollow">店长的文章</a>，但是有点老旧了，于是我做了点更改（这里的图片来源于 <a href="https://blog.anheyu.com/posts/asdx.html" rel="nofollow">安知鱼</a>）：</p>
</blockquote>
<ol>
<li>首先要创建一个放置源码的私有仓库，以下称之为 <code class="notranslate">hexo-source</code>，</li>
<li>然后要生成一个 Github 密钥：</li>
</ol>
<blockquote>
<p>访问 Github-&gt; 头像（右上角）-&gt; Settings-&gt; Developer Settings-&gt; Personal access tokens-&gt; generate new token, 创建的 Token 名称随意，但必须勾选 repo 项 和 workflows 项。</p>
</blockquote>
<p>点击 <a href="https://github.com/settings/tokens">链接</a> 前往生成</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/af39474890ba3329786928b2d010374f1d88d9e0ee8d7f3662f7965dd6cae15e/68747470733a2f2f696d672e3331343932362e78797a2f696d616765732f323032352f30382f31372f6a69616f787565312e77656270"><img src="https://camo.githubusercontent.com/af39474890ba3329786928b2d010374f1d88d9e0ee8d7f3662f7965dd6cae15e/68747470733a2f2f696d672e3331343932362e78797a2f696d616765732f323032352f30382f31372f6a69616f787565312e77656270" alt="" data-canonical-src="https://img.314926.xyz/images/2025/08/17/jiaoxue1.webp" style="max-width: 100%;"></a><br>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/c32a370f9615ea0f9f7abbc61b3cf374e2373aaafd85b46597a3226c3ac2d76b/68747470733a2f2f696d672e3331343932362e78797a2f696d616765732f323032352f30382f31372f6a69616f787565322e77656270"><img src="https://camo.githubusercontent.com/c32a370f9615ea0f9f7abbc61b3cf374e2373aaafd85b46597a3226c3ac2d76b/68747470733a2f2f696d672e3331343932362e78797a2f696d616765732f323032352f30382f31372f6a69616f787565322e77656270" alt="" data-canonical-src="https://img.314926.xyz/images/2025/08/17/jiaoxue2.webp" style="max-width: 100%;"></a></p>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>
<p>!!! token 只会显示这一次，之后将无法查看，所以务必保证你已经记录下了 Token。之后如果忘记了就只能重新生成重新配置了。</p>
</div>
<ol start="3">
<li>在 <code class="notranslate">hexo-source</code> 仓库中的设置里点击设置 -&gt; action -&gt; General -&gt; 工作流程权限
<ul>
<li>勾选 <code class="notranslate">Read and write permissions</code>，并且勾选 <code class="notranslate">Allow &lt;span style="background:#FF0000;"&gt;&lt;/span&gt;all actions and reusable workflows</code>。</li>
</ul>
</li>
<li>在设置里 -&gt; Secrets and variables -&gt; Actions -&gt; New repository secret 添加</li>
</ol>
<ul>
<li><code class="notranslate">GITHUBTOKEN</code>：放置你刚才生成的 Token。</li>
</ul>
<hr>
<h2>上述是前置条件，接下来要先部署 hexo，你才好继续下一步。</h2>
<h2>初始化 Hexo</h2>
<ol>
<li>在本地新建一个文件夹，例如 <code class="notranslate">hexo-solitude</code>。</li>
<li>这里我是用的是 vscode 打开该文件夹，然后在终端输入以下命令来初始化 Hexo：</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">hexo init (项目名称)</pre></div>
<p>我一般都不填，直接在文件下下就可以开始，如果你添加了项目名称，那么下一步就是：</p>
<div class="highlight highlight-source-shell"><pre class="notranslate"><span class="pl-c1">cd</span> (项目名称)</pre></div>
<ol start="3">
<li>安装依赖包：</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm install</pre></div>
<p>然后就是选择你想要的主题，这里我使用的是<a href="https://solitude.js.org/cn/getting-started/installation" rel="nofollow">Solitude</a>，具体的配置不细讲，我只讲一部分：</p>
<p>首先就是基本的安装，这里还是选择<code class="notranslate">git clone</code>没有别的原因，主要还是会改点源码，不想改的直接pnpm下载即可：</p>
<pre lang="git" class="notranslate"><code class="notranslate">// git安装
git clone -b dev https://github.com/everfu/hexo-theme-solitude.git themes/solitude

// pnpm 安装
pnpm i hexo-theme-solitude
</code></pre>
<p>然后在<code class="notranslate">_config.yml</code>里修改成：</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-ent">theme</span>: <span class="pl-s">solitude</span></pre></div>
<h2>配置</h2>
<p>下列代码是我的备忘：</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> Hexo Configuration</span>
<span class="pl-c"><span class="pl-c">#</span># Docs: https://hexo.io/docs/configuration.html</span>
<span class="pl-c"><span class="pl-c">#</span># Source: https://github.com/hexojs/hexo/</span>

<span class="pl-c"><span class="pl-c">#</span> Site</span>
<span class="pl-ent">title</span>: <span class="pl-s">喵落阁</span>
<span class="pl-ent">subtitle</span>: <span class="pl-s"><span class="pl-pds">'</span>克喵的博客<span class="pl-pds">'</span></span>
<span class="pl-ent">description</span>: <span class="pl-s"><span class="pl-pds">'</span>愿你看清一切真相后，依旧热爱你的家人和朋友。<span class="pl-pds">'</span></span>
<span class="pl-ent">keywords</span>: <span class="pl-s">克喵,kemiao,博客</span>
<span class="pl-ent">author</span>: <span class="pl-s">克喵爱吃卤面</span>
<span class="pl-ent">language</span>: <span class="pl-s">zh-CN</span>
<span class="pl-ent">timezone</span>: <span class="pl-s"><span class="pl-pds">'</span>Asia/Shanghai<span class="pl-pds">'</span></span>

<span class="pl-c"><span class="pl-c">#</span> URL</span>
<span class="pl-c"><span class="pl-c">#</span># Set your site url here. For example, if you use GitHub Page, set url as 'https://username.github.io/project'</span>
<span class="pl-ent">url</span>: <span class="pl-c"><span class="pl-c">#</span> 填网站地址</span>
<span class="pl-ent">permalink</span>: <span class="pl-s">posts/:abbrlink.html</span>
<span class="pl-ent">permalink_defaults</span>:
<span class="pl-ent">pretty_urls</span>:
  <span class="pl-ent">trailing_index</span>: <span class="pl-s">true </span><span class="pl-c"><span class="pl-c">#</span> Set to false to remove trailing 'index.html' from permalinks</span>
  <span class="pl-ent">trailing_html</span>: <span class="pl-s">true </span><span class="pl-c"><span class="pl-c">#</span> Set to false to remove trailing '.html' from permalinks</span>

<span class="pl-c"><span class="pl-c">#</span> Directory</span>
<span class="pl-ent">source_dir</span>: <span class="pl-s">source</span>
<span class="pl-ent">public_dir</span>: <span class="pl-s">public</span>
<span class="pl-ent">tag_dir</span>: <span class="pl-s">tags</span>
<span class="pl-ent">archive_dir</span>: <span class="pl-s">archives</span>
<span class="pl-ent">category_dir</span>: <span class="pl-s">categories</span>
<span class="pl-ent">code_dir</span>: <span class="pl-s">downloads/code</span>
<span class="pl-ent">i18n_dir</span>: <span class="pl-s">:lang</span>
<span class="pl-ent">skip_render</span>:

<span class="pl-c"><span class="pl-c">#</span> Writing</span>
<span class="pl-ent">new_post_name</span>: <span class="pl-s">:title.md </span><span class="pl-c"><span class="pl-c">#</span> File name of new posts</span>
<span class="pl-ent">default_layout</span>: <span class="pl-s">post</span>
<span class="pl-ent">titlecase</span>: <span class="pl-s">false </span><span class="pl-c"><span class="pl-c">#</span> Transform title into titlecase</span>
<span class="pl-ent">external_link</span>:
  <span class="pl-ent">enable</span>: <span class="pl-s">true </span><span class="pl-c"><span class="pl-c">#</span> Open external links in new tab</span>
  <span class="pl-ent">field</span>: <span class="pl-s">site </span><span class="pl-c"><span class="pl-c">#</span> Apply to the whole site</span>
  <span class="pl-ent">exclude</span>: <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>
<span class="pl-ent">filename_case</span>: <span class="pl-c1">0</span>
<span class="pl-ent">render_drafts</span>: <span class="pl-c1">false</span>
<span class="pl-ent">post_asset_folder</span>: <span class="pl-c1">false</span>
<span class="pl-ent">relative_link</span>: <span class="pl-c1">false</span>
<span class="pl-ent">future</span>: <span class="pl-c1">true</span>
<span class="pl-ent">syntax_highlighter</span>: <span class="pl-s">highlight.js</span>
<span class="pl-ent">highlight</span>:
  <span class="pl-ent">line_number</span>: <span class="pl-c1">false</span>
  <span class="pl-ent">auto_detect</span>: <span class="pl-c1">false</span>
  <span class="pl-ent">tab_replace</span>: <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>
  <span class="pl-ent">wrap</span>: <span class="pl-c1">true</span>
  <span class="pl-ent">hljs</span>: <span class="pl-c1">false</span>
<span class="pl-ent">prismjs</span>:
  <span class="pl-ent">preprocess</span>: <span class="pl-c1">true</span>
  <span class="pl-ent">line_number</span>: <span class="pl-c1">true</span>
  <span class="pl-ent">tab_replace</span>: <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>

<span class="pl-c"><span class="pl-c">#</span> Home page setting</span>
<span class="pl-c"><span class="pl-c">#</span> path: Root path for your blogs index page. (default = '')</span>
<span class="pl-c"><span class="pl-c">#</span> per_page: Posts displayed per page. (0 = disable pagination)</span>
<span class="pl-c"><span class="pl-c">#</span> order_by: Posts order. (Order by date descending by default)</span>
<span class="pl-ent">index_generator</span>:
  <span class="pl-ent">path</span>: <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>
  <span class="pl-ent">per_page</span>: <span class="pl-c1">10</span>
  <span class="pl-ent">order_by</span>: <span class="pl-s">-date</span>

<span class="pl-c"><span class="pl-c">#</span> Category &amp; Tag</span>
<span class="pl-ent">default_category</span>: <span class="pl-s">uncategorized</span>
<span class="pl-ent">category_map</span>:
<span class="pl-ent">tag_map</span>:

<span class="pl-c"><span class="pl-c">#</span> Metadata elements</span>
<span class="pl-c"><span class="pl-c">#</span># https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta</span>
<span class="pl-ent">meta_generator</span>: <span class="pl-c1">true</span>

<span class="pl-c"><span class="pl-c">#</span> Date / Time format</span>
<span class="pl-c"><span class="pl-c">#</span># Hexo uses Moment.js to parse and display date</span>
<span class="pl-c"><span class="pl-c">#</span># You can customize the date format as defined in</span>
<span class="pl-c"><span class="pl-c">#</span># http://momentjs.com/docs/#/displaying/format/</span>
<span class="pl-ent">date_format</span>: <span class="pl-s">YYYY-MM-DD</span>
<span class="pl-ent">time_format</span>: <span class="pl-s">HH:mm:ss</span>
<span class="pl-c"><span class="pl-c">#</span># updated_option supports 'mtime', 'date', 'empty'</span>
<span class="pl-ent">updated_option</span>: <span class="pl-s"><span class="pl-pds">'</span>mtime<span class="pl-pds">'</span></span>

<span class="pl-c"><span class="pl-c">#</span> Pagination</span>
<span class="pl-c"><span class="pl-c">#</span># Set per_page to 0 to disable pagination</span>
<span class="pl-ent">per_page</span>: <span class="pl-c1">10</span>
<span class="pl-ent">pagination_dir</span>: <span class="pl-s">page</span>

<span class="pl-c"><span class="pl-c">#</span> Include / Exclude file(s)</span>
<span class="pl-c"><span class="pl-c">#</span># include:/exclude: options only apply to the 'source/' folder</span>
<span class="pl-ent">include</span>: <span class="pl-s">[]</span>
<span class="pl-ent">exclude</span>: <span class="pl-s">[]</span>
<span class="pl-ent">ignore</span>: <span class="pl-s">[]</span>

<span class="pl-c"><span class="pl-c">#</span> Extensions</span>
<span class="pl-c"><span class="pl-c">#</span># Plugins: https://hexo.io/plugins/</span>
<span class="pl-c"><span class="pl-c">#</span># Themes: https://hexo.io/themes/</span>
<span class="pl-ent">theme</span>: <span class="pl-s">solitude</span>

<span class="pl-c"><span class="pl-c">#</span> Deployment</span>
<span class="pl-c"><span class="pl-c">#</span># Docs: https://hexo.io/docs/one-command-deployment</span>
<span class="pl-ent">deploy</span>:
  <span class="pl-ent">type</span>: <span class="pl-s">git</span>
  <span class="pl-ent">repo</span>: <span class="pl-s">git@github.com-xx:kemiaofxjun/kemiaofxjun.github.io.git</span>
  <span class="pl-ent">branch</span>: <span class="pl-s">main</span>

<span class="pl-c"><span class="pl-c">#</span> RSS Feed 配置</span>
<span class="pl-ent">feed</span>:
  <span class="pl-ent">type</span>: <span class="pl-s">atom          </span><span class="pl-c"><span class="pl-c">#</span> 生成 atom.xml</span>
  <span class="pl-ent">path</span>: <span class="pl-s">atom.xml      </span><span class="pl-c"><span class="pl-c">#</span> 输出文件名</span>
  <span class="pl-ent">limit</span>: <span class="pl-c1">20</span>           <span class="pl-c"><span class="pl-c">#</span> 最多显示文章数 (0=全部)</span>
  <span class="pl-ent">hub</span>:                <span class="pl-c"><span class="pl-c">#</span> PubSubHubbub 中心 (可选)</span>
  <span class="pl-ent">content</span>: <span class="pl-s">true       </span><span class="pl-c"><span class="pl-c">#</span> 是否包含全文内容 (true=是, false=仅摘要)</span>
  <span class="pl-ent">content_limit</span>: <span class="pl-c1">140</span>  <span class="pl-c"><span class="pl-c">#</span> 摘要长度（当 content=false 时生效）</span>
  <span class="pl-ent">content_limit_delim</span>: <span class="pl-s"><span class="pl-pds">'</span> <span class="pl-pds">'</span></span>  <span class="pl-c"><span class="pl-c">#</span> 截断分隔符</span>
  <span class="pl-ent">order_by</span>: <span class="pl-s">-date     </span><span class="pl-c"><span class="pl-c">#</span> 按日期倒序排列</span>
  <span class="pl-ent">autodiscovery</span>: <span class="pl-s">true </span><span class="pl-c"><span class="pl-c">#</span> 在 HTML 头部添加自动发现标签</span>

<span class="pl-c"><span class="pl-c">#</span> 数学公式渲染配置</span>
<span class="pl-ent">markdown</span>:
  <span class="pl-ent">preset</span>: <span class="pl-s"><span class="pl-pds">'</span>default<span class="pl-pds">'</span></span> <span class="pl-c"><span class="pl-c">#</span> 使用的 MD 语法，默认使用的 GFM</span>
  <span class="pl-ent">render</span>:
    <span class="pl-ent">html</span>: <span class="pl-s">true </span><span class="pl-c"><span class="pl-c">#</span> 渲染 html</span>
    <span class="pl-ent">xhtmlOut</span>: <span class="pl-c1">false</span>
    <span class="pl-ent">langPrefix</span>: <span class="pl-s"><span class="pl-pds">'</span>language-<span class="pl-pds">'</span></span> <span class="pl-c"><span class="pl-c">#</span> 在代码块的类名中添加前缀（指定语言时）。</span>
    <span class="pl-ent">breaks</span>: <span class="pl-c1">true</span>
    <span class="pl-ent">linkify</span>: <span class="pl-s">true </span><span class="pl-c"><span class="pl-c">#</span> 如果你写了一个链接而不是 [name](link) 方式，会自动识别为链接并渲染。</span>
    <span class="pl-ent">typographer</span>: <span class="pl-s">true </span><span class="pl-c"><span class="pl-c">#</span> 将替换常见的印刷元素。</span>
    <span class="pl-ent">quotes</span>: <span class="pl-s"><span class="pl-pds">'</span>“”‘’<span class="pl-pds">'</span></span> <span class="pl-c"><span class="pl-c">#</span> 替换文章张的 "" '' 号</span>
  <span class="pl-ent">enable_rules</span>:
  <span class="pl-ent">disable_rules</span>:
  <span class="pl-ent">plugins</span>: <span class="pl-c"><span class="pl-c">#</span> 使用插件</span>
  <span class="pl-ent">anchors</span>:
    <span class="pl-ent">level</span>: <span class="pl-c1">2</span> <span class="pl-c"><span class="pl-c">#</span> 渲染标题的级别（h1,h2,h3）</span>
    <span class="pl-ent">collisionSuffix</span>: <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>
    <span class="pl-ent">permalink</span>: <span class="pl-c1">true</span>
    <span class="pl-ent">permalinkClass</span>: <span class="pl-s"><span class="pl-pds">'</span>headerlink<span class="pl-pds">'</span></span>
    <span class="pl-ent">permalinkSide</span>: <span class="pl-s"><span class="pl-pds">'</span>left<span class="pl-pds">'</span></span>
    <span class="pl-ent">permalinkSymbol</span>: <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>
    <span class="pl-ent">case</span>: <span class="pl-c1">0</span>
    <span class="pl-ent">separator</span>: <span class="pl-s"><span class="pl-pds">'</span>-<span class="pl-pds">'</span></span>
  <span class="pl-ent">images</span>: <span class="pl-c"><span class="pl-c">#</span> 图片的一些编译</span>
    <span class="pl-ent">lazyload</span>: <span class="pl-s">true </span><span class="pl-c"><span class="pl-c">#</span> 是否需要渲染 lazyload</span>
    <span class="pl-ent">prepend_root</span>: <span class="pl-c1">false</span>
    <span class="pl-ent">post_asset</span>: <span class="pl-c1">false</span>
  <span class="pl-ent">inline</span>: <span class="pl-c1">false</span>

<span class="pl-ent">swpp</span>:
  <span class="pl-c"><span class="pl-c">#</span> 是否启用插件</span>
  <span class="pl-ent">enable</span>: <span class="pl-c1">true</span>
  <span class="pl-c"><span class="pl-c">#</span> 是否在发布前自动执行脚本</span>
  <span class="pl-ent">auto_exec</span>: <span class="pl-c1">true</span>
  <span class="pl-ent">gen_dom</span>: <span class="pl-c1">true</span>

<span class="pl-c"><span class="pl-c">#</span> 文章链接转数字或字母：https://github.com/rozbo/hexo-abbrlink</span>
<span class="pl-ent">abbrlink</span>:
    <span class="pl-ent">alg</span>: <span class="pl-s">crc16   </span><span class="pl-c"><span class="pl-c">#</span>算法： crc16(default) and crc32</span>
    <span class="pl-ent">rep</span>: <span class="pl-s">hex     </span><span class="pl-c"><span class="pl-c">#</span>进制： dec(default) and hex: dec #输出进制：十进制和十六进制，默认为10进制。丨dec为十进制，hex</span>

<span class="pl-c"><span class="pl-c">#</span> https://github.com/hexojs/hexo-generator-sitemap</span>
<span class="pl-ent">sitemap</span>:
  <span class="pl-ent">path</span>: <span class="pl-s">sitemap.xml</span>
  <span class="pl-ent">rel</span>: <span class="pl-c1">false</span>
  <span class="pl-ent">tags</span>: <span class="pl-c1">true</span>
  <span class="pl-ent">categories</span>: <span class="pl-c1">true</span>

<span class="pl-ent">algolia</span>:
  <span class="pl-ent">appId</span>: <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>
  <span class="pl-ent">apiKey</span>: <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>
  <span class="pl-ent">adminApiKey</span>: <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>
  <span class="pl-ent">chunkSize</span>: <span class="pl-c1">5000</span>
  <span class="pl-ent">indexName</span>: <span class="pl-s"><span class="pl-pds">"</span>index-name<span class="pl-pds">"</span></span>
  <span class="pl-ent">fields</span>:
    - <span class="pl-s">content:strip:truncate,0,500</span>
    - <span class="pl-s">excerpt:strip</span>
    - <span class="pl-s">gallery</span>
    - <span class="pl-s">permalink</span>
    - <span class="pl-s">photos</span>
    - <span class="pl-s">slug</span>
    - <span class="pl-s">tags</span>
    - <span class="pl-s">title</span>

<span class="pl-c"><span class="pl-c">#</span> hexo-safego安全跳转插件</span>
<span class="pl-c"><span class="pl-c">#</span> see https://blog.liushen.fun/posts/1dfd1f41/</span>
<span class="pl-ent">hexo_safego</span>:
  <span class="pl-c"><span class="pl-c">#</span> 基本功能设置</span>
  <span class="pl-ent">general</span>:
    <span class="pl-ent">enable</span>: <span class="pl-s">true                </span><span class="pl-c"><span class="pl-c">#</span> 启用插件</span>
    <span class="pl-ent">enable_base64_encode</span>: <span class="pl-s">true  </span><span class="pl-c"><span class="pl-c">#</span> 使用 Base64 编码</span>
    <span class="pl-ent">enable_target_blank</span>: <span class="pl-s">true   </span><span class="pl-c"><span class="pl-c">#</span> 从新窗口打开跳转页面</span>

  <span class="pl-c"><span class="pl-c">#</span> 安全设置</span>
  <span class="pl-ent">security</span>:
    <span class="pl-ent">url_param_name</span>: <span class="pl-s"><span class="pl-pds">'</span>u<span class="pl-pds">'</span></span>         <span class="pl-c"><span class="pl-c">#</span> URL 参数名</span>
    <span class="pl-ent">html_file_name</span>: <span class="pl-s"><span class="pl-pds">'</span>go.html<span class="pl-pds">'</span></span>   <span class="pl-c"><span class="pl-c">#</span> 重定向页面的文件名</span>
    <span class="pl-ent">ignore_attrs</span>:               <span class="pl-c"><span class="pl-c">#</span> 忽略处理的 HTML 结构</span>
      - <span class="pl-s"><span class="pl-pds">'</span>data-fancybox<span class="pl-pds">'</span></span>

  <span class="pl-c"><span class="pl-c">#</span> 容器与页面设置</span>
  <span class="pl-ent">scope</span>:
    <span class="pl-ent">apply_containers</span>:           <span class="pl-c"><span class="pl-c">#</span> 应用的容器选择器</span>
      - <span class="pl-s"><span class="pl-pds">'</span>#article-container<span class="pl-pds">'</span></span>
    <span class="pl-ent">apply_pages</span>:                <span class="pl-c"><span class="pl-c">#</span> 应用的页面路径</span>
      - <span class="pl-s"><span class="pl-pds">"</span>/posts/<span class="pl-pds">"</span></span>
      - <span class="pl-s"><span class="pl-pds">"</span>/devices/<span class="pl-pds">"</span></span>
    <span class="pl-ent">exclude_pages</span>:              <span class="pl-c"><span class="pl-c">#</span> 排除的页面路径</span>

  <span class="pl-c"><span class="pl-c">#</span> 域名白名单</span>
  <span class="pl-ent">whitelist</span>:
    <span class="pl-ent">domain_whitelist</span>:           <span class="pl-c"><span class="pl-c">#</span> 允许的白名单域名，通过字符串匹配实现</span>
      - <span class="pl-s"><span class="pl-pds">"</span>kemeow.top<span class="pl-pds">"</span></span>
      - <span class="pl-s"><span class="pl-pds">"</span>kemiaosw.top<span class="pl-pds">"</span></span>
      - <span class="pl-s"><span class="pl-pds">"</span>050815.xyz<span class="pl-pds">"</span></span>
      - <span class="pl-s"><span class="pl-pds">"</span>314926.xyz<span class="pl-pds">"</span></span>
      - <span class="pl-s"><span class="pl-pds">"</span>051531.xyz<span class="pl-pds">"</span></span>

  <span class="pl-c"><span class="pl-c">#</span> 页面外观设置</span>
  <span class="pl-ent">appearance</span>:
    <span class="pl-ent">avatar</span>: <span class="pl-s">https://img.314926.xyz/images/2025/08/13/no-background-kemiaofxjun.webp   </span><span class="pl-c"><span class="pl-c">#</span> 跳转页面头像路径</span>
    <span class="pl-ent">title</span>: <span class="pl-s"><span class="pl-pds">"</span>喵洛阁<span class="pl-pds">"</span></span>            <span class="pl-c"><span class="pl-c">#</span> 跳转页面标题</span>
    <span class="pl-ent">subtitle</span>: <span class="pl-s"><span class="pl-pds">"</span>安全中心<span class="pl-pds">"</span></span>         <span class="pl-c"><span class="pl-c">#</span> 跳转页面副标题</span>
    <span class="pl-ent">darkmode</span>: <span class="pl-s">auto              </span><span class="pl-c"><span class="pl-c">#</span> 是否启用深色模式</span>
    <span class="pl-ent">countdowntime</span>: <span class="pl-c1">4</span>            <span class="pl-c"><span class="pl-c">#</span> 跳转页面倒计时秒数，如果设置为负数则为不自动跳转</span>

  <span class="pl-c"><span class="pl-c">#</span> 调试设置</span>
  <span class="pl-ent">debug</span>:
    <span class="pl-ent">enable</span>: <span class="pl-s">false               </span><span class="pl-c"><span class="pl-c">#</span> 启用调试模式</span>

<span class="pl-c"><span class="pl-c">#</span> 追番插件</span>
<span class="pl-c"><span class="pl-c">#</span> https://github.com/HCLonely/hexo-bilibili-bangumi</span>
<span class="pl-ent">bangumi</span>: <span class="pl-c"><span class="pl-c">#</span> 追番设置</span>
  <span class="pl-ent">enable</span>: <span class="pl-c1">true</span>
  <span class="pl-ent">source</span>: <span class="pl-s">bili</span>
  <span class="pl-ent">path</span>: 
  <span class="pl-ent">vmid</span>: <span class="pl-c1">3546643173477234</span>
  <span class="pl-ent">title</span>: <span class="pl-s"><span class="pl-pds">"</span>追番列表<span class="pl-pds">"</span></span>
  <span class="pl-ent">quote</span>: <span class="pl-s"><span class="pl-pds">"</span>生命不息，追番不止！<span class="pl-pds">"</span></span>
  <span class="pl-ent">show</span>: <span class="pl-c1">1</span>
  <span class="pl-ent">lazyload</span>: <span class="pl-c1">false</span>
  <span class="pl-ent">loading</span>:
  <span class="pl-ent">showMyComment</span>: <span class="pl-c1">true</span>
  <span class="pl-ent">pagination</span>: <span class="pl-c1">false</span>
  <span class="pl-ent">extra_options</span>:
    <span class="pl-ent">top_img</span>: <span class="pl-c1">false</span>
    <span class="pl-ent">lazyload</span>:
      <span class="pl-ent">enable</span>: <span class="pl-c1">false</span>
</pre></div>
<p>博客的其他修改基本就是来自教程和一些博主的网站。</p>
<hr>
<h2>插件</h2>
<ol>
<li><strong>基础依赖</strong> <code class="notranslate">hexo-renderer-pug</code></li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm i hexo-renderer-pug</pre></div>
<hr>
<ol start="2">
<li><strong>字数统计</strong> <code class="notranslate">hexo-wordcount</code></li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm i hexo-wordcount</pre></div>
<p>配置里修改：</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> --------------------------- start ---------------------------</span>
<span class="pl-c"><span class="pl-c">#</span> Word count</span>
<span class="pl-c"><span class="pl-c">#</span> 字数统计</span>
<span class="pl-c"><span class="pl-c">#</span> warning: Please install the hexo-wordcount plugin first.</span>
<span class="pl-c"><span class="pl-c">#</span> 警告: 请先安装 hexo-wordcount 插件。</span>
<span class="pl-ent">wordcount</span>: <span class="pl-c1">false</span>
<span class="pl-c"><span class="pl-c">#</span> --------------------------- end ---------------------------</span></pre></div>
<hr>
<ol start="3">
<li><strong>数学公式</strong> 卸载 <code class="notranslate">hexo-render-marked</code></li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">npm un hexo-renderer-marked</pre></div>
<p>安装 <code class="notranslate">hexo-renderer-markdown-it</code> <code class="notranslate">katex</code> <code class="notranslate">@renbaoshuo/markdown-it-katex</code></p>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm i hexo-renderer-markdown-it katex @renbaoshuo/markdown-it-katex</pre></div>
<p>配置里修改</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> --------------------------- start ---------------------------</span>
<span class="pl-c"><span class="pl-c">#</span> Katex</span>
<span class="pl-c"><span class="pl-c">#</span> Latex formula support</span>
<span class="pl-c"><span class="pl-c">#</span> Latex 公式支持</span>
<span class="pl-ent">katex</span>:
  <span class="pl-ent">enable</span>: <span class="pl-c1">false</span>
  <span class="pl-c"><span class="pl-c">#</span> Whether to load on each page</span>
  <span class="pl-c"><span class="pl-c">#</span> 是否在每个页面加载</span>
  <span class="pl-ent">per_page</span>: <span class="pl-c1">false</span>
  <span class="pl-c"><span class="pl-c">#</span> Whether to enable copy formula</span>
  <span class="pl-c"><span class="pl-c">#</span> 是否启用复制公式</span>
  <span class="pl-ent">copytex</span>: <span class="pl-c1">false</span>
<span class="pl-c"><span class="pl-c">#</span> --------------------------- end ---------------------------</span></pre></div>
<p>添加以下内容到 <code class="notranslate">_config.yml</code></p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-ent">markdown</span>:
  <span class="pl-ent">preset</span>: <span class="pl-s"><span class="pl-pds">'</span>default<span class="pl-pds">'</span></span>
  <span class="pl-ent">render</span>:
    <span class="pl-ent">html</span>: <span class="pl-c1">true</span>
    <span class="pl-ent">xhtmlOut</span>: <span class="pl-c1">false</span>
    <span class="pl-ent">langPrefix</span>: <span class="pl-s"><span class="pl-pds">'</span>language-<span class="pl-pds">'</span></span>
    <span class="pl-ent">breaks</span>: <span class="pl-c1">true</span>
    <span class="pl-ent">linkify</span>: <span class="pl-c1">true</span>
    <span class="pl-ent">typographer</span>: <span class="pl-c1">true</span>
    <span class="pl-ent">quotes</span>: <span class="pl-s"><span class="pl-pds">'</span>“”‘’<span class="pl-pds">'</span></span>
  <span class="pl-ent">enable_rules</span>:
  <span class="pl-ent">disable_rules</span>:
  <span class="pl-ent">plugins</span>:
    - <span class="pl-s"><span class="pl-pds">'</span>@renbaoshuo/markdown-it-katex<span class="pl-pds">'</span></span>
  <span class="pl-ent">anchors</span>:
    <span class="pl-ent">level</span>: <span class="pl-c1">2</span>
    <span class="pl-ent">collisionSuffix</span>: <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>
    <span class="pl-ent">permalink</span>: <span class="pl-c1">false</span>
    <span class="pl-ent">permalinkClass</span>: <span class="pl-s"><span class="pl-pds">'</span>header-anchor<span class="pl-pds">'</span></span>
    <span class="pl-ent">permalinkSide</span>: <span class="pl-s"><span class="pl-pds">'</span>left<span class="pl-pds">'</span></span>
    <span class="pl-ent">permalinkSymbol</span>: <span class="pl-s"><span class="pl-pds">'</span>¶<span class="pl-pds">'</span></span>
    <span class="pl-ent">case</span>: <span class="pl-c1">0</span>
    <span class="pl-ent">separator</span>: <span class="pl-s"><span class="pl-pds">'</span>-<span class="pl-pds">'</span></span>
  <span class="pl-ent">images</span>:
    <span class="pl-ent">lazyload</span>: <span class="pl-c1">false</span>
    <span class="pl-ent">prepend_root</span>: <span class="pl-c1">false</span>
    <span class="pl-ent">post_asset</span>: <span class="pl-c1">false</span>
  <span class="pl-ent">inline</span>: <span class="pl-s">false  </span><span class="pl-c"><span class="pl-c">#</span> https://markdown-it.github.io/markdown-it/#MarkdownIt.renderInline</span></pre></div>
<p>开启配置项</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> --------------------------- start ---------------------------</span>
<span class="pl-c"><span class="pl-c">#</span> Katex</span>
<span class="pl-c"><span class="pl-c">#</span> Latex formula support</span>
<span class="pl-c"><span class="pl-c">#</span> Latex 公式支持</span>
<span class="pl-ent">katex</span>:
  <span class="pl-ent">enable</span>: <span class="pl-c1">true</span>
  <span class="pl-c"><span class="pl-c">#</span> Whether to load on each page</span>
  <span class="pl-c"><span class="pl-c">#</span> 是否在每个页面加载</span>
  <span class="pl-ent">per_page</span>: <span class="pl-c1">true</span>
  <span class="pl-c"><span class="pl-c">#</span> Whether to enable copy formula</span>
  <span class="pl-c"><span class="pl-c">#</span> 是否启用复制公式</span>
  <span class="pl-ent">copytex</span>: <span class="pl-c1">false</span>
<span class="pl-c"><span class="pl-c">#</span> --------------------------- end ---------------------------</span>
</pre></div>
<hr>
<ol start="4">
<li><strong>PWA</strong> 安装 hexo-swpp 和 swpp-backends 插件</li>
</ol>
<p>在博客根目录执行</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm i hexo-swpp 

pnpm i swpp-backends</pre></div>
<p>开启配置</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> 大约在773行</span>
<span class="pl-c"><span class="pl-c">#</span> --------------------------- start ---------------------------</span>
<span class="pl-c"><span class="pl-c">#</span> PWA</span>
<span class="pl-c"><span class="pl-c">#</span> Progressive Web App</span>
<span class="pl-ent">pwa</span>:
  <span class="pl-ent">enable</span>: <span class="pl-c1">true</span>
  <span class="pl-ent">manifest</span>: <span class="pl-s">/manifest.json </span><span class="pl-c"><span class="pl-c">#</span> manifest.json</span>
  <span class="pl-ent">theme_color</span>: <span class="pl-s"><span class="pl-pds">"</span>#006a73<span class="pl-pds">"</span></span> <span class="pl-c"><span class="pl-c">#</span> Theme color</span>
  <span class="pl-ent">mask_icon</span>: <span class="pl-s">/img/pwa/favicon.png </span><span class="pl-c"><span class="pl-c">#</span> Mask icon</span>
  <span class="pl-ent">apple_touch_icon</span>: <span class="pl-s">/img/pwa/favicon.png </span><span class="pl-c"><span class="pl-c">#</span> Apple touch icon</span>
  <span class="pl-ent">bookmark_icon</span>: <span class="pl-s">/img/pwa/favicon.png </span><span class="pl-c"><span class="pl-c">#</span> Bookmark icon</span>
  <span class="pl-ent">favicon_32_32</span>: <span class="pl-s">/img/pwa/favicon_32.png </span><span class="pl-c"><span class="pl-c">#</span> 32x32 icon</span>
  <span class="pl-ent">favicon_16_16</span>: <span class="pl-s">/img/pwa/favicon_16.png </span><span class="pl-c"><span class="pl-c">#</span> 16x16 icon</span>
<span class="pl-c"><span class="pl-c">#</span> --------------------------- end ---------------------------</span>
</pre></div>
<p>在<code class="notranslate">_config.yml</code>里添加swpp配置</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-ent">swpp</span>:
  <span class="pl-c"><span class="pl-c">#</span> 是否启用插件</span>
  <span class="pl-ent">enable</span>: <span class="pl-c1">true</span>
  <span class="pl-c"><span class="pl-c">#</span> 是否在发布前自动执行脚本</span>
  <span class="pl-ent">auto_exec</span>: <span class="pl-c1">true</span>
  <span class="pl-ent">gen_dom</span>: <span class="pl-c1">true</span></pre></div>
<p>在 <code class="notranslate">source</code> 目录中创建 <code class="notranslate">manifest.json</code> 文件</p>
<div class="highlight highlight-source-json"><pre class="notranslate">{
    <span class="pl-ent">"name"</span>: <span class="pl-s"><span class="pl-pds">"</span>网站名称<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"short_name"</span>: <span class="pl-s"><span class="pl-pds">"</span>网站名称缩写<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"theme_color"</span>: <span class="pl-s"><span class="pl-pds">"</span>#006a73<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"background_color"</span>: <span class="pl-s"><span class="pl-pds">"</span>#006a73<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"display"</span>: <span class="pl-s"><span class="pl-pds">"</span>fullscreen<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"scope"</span>: <span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"start_url"</span>: <span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"id"</span>: <span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"icons"</span>: [
      {
        <span class="pl-ent">"src"</span>: <span class="pl-s"><span class="pl-pds">"</span>/img/pwa/favicon_16.png<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"sizes"</span>: <span class="pl-s"><span class="pl-pds">"</span>16x16<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"type"</span>: <span class="pl-s"><span class="pl-pds">"</span>image/png<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"purpose"</span>: <span class="pl-s"><span class="pl-pds">"</span>any<span class="pl-pds">"</span></span>
      },
      {
        <span class="pl-ent">"src"</span>: <span class="pl-s"><span class="pl-pds">"</span>/img/pwa/favicon_16.png<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"sizes"</span>: <span class="pl-s"><span class="pl-pds">"</span>16x16<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"type"</span>: <span class="pl-s"><span class="pl-pds">"</span>image/png<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"purpose"</span>: <span class="pl-s"><span class="pl-pds">"</span>maskable<span class="pl-pds">"</span></span>
      },
      {
        <span class="pl-ent">"src"</span>: <span class="pl-s"><span class="pl-pds">"</span>/img/pwa/favicon_32.png<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"sizes"</span>: <span class="pl-s"><span class="pl-pds">"</span>32x32<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"type"</span>: <span class="pl-s"><span class="pl-pds">"</span>image/png<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"purpose"</span>: <span class="pl-s"><span class="pl-pds">"</span>any<span class="pl-pds">"</span></span>
      },
      {
        <span class="pl-ent">"src"</span>: <span class="pl-s"><span class="pl-pds">"</span>/img/pwa/favicon_32.png<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"sizes"</span>: <span class="pl-s"><span class="pl-pds">"</span>32x32<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"type"</span>: <span class="pl-s"><span class="pl-pds">"</span>image/png<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"purpose"</span>: <span class="pl-s"><span class="pl-pds">"</span>maskable<span class="pl-pds">"</span></span>
      },
      {
        <span class="pl-ent">"src"</span>: <span class="pl-s"><span class="pl-pds">"</span>/img/pwa/favicon.png<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"sizes"</span>: <span class="pl-s"><span class="pl-pds">"</span>180x180<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"type"</span>: <span class="pl-s"><span class="pl-pds">"</span>image/png<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"purpose"</span>: <span class="pl-s"><span class="pl-pds">"</span>any<span class="pl-pds">"</span></span>
      },
      {
        <span class="pl-ent">"src"</span>: <span class="pl-s"><span class="pl-pds">"</span>/img/pwa/favicon.png<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"sizes"</span>: <span class="pl-s"><span class="pl-pds">"</span>180x180<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"type"</span>: <span class="pl-s"><span class="pl-pds">"</span>image/png<span class="pl-pds">"</span></span>,
        <span class="pl-ent">"purpose"</span>: <span class="pl-s"><span class="pl-pds">"</span>maskable<span class="pl-pds">"</span></span>
      }
    ],
    <span class="pl-ent">"splash_pages"</span>: <span class="pl-c1">null</span>
}
</pre></div>
<p>在博客根目录创建一个 <code class="notranslate">sw-rules.js</code> 文件</p>
<div class="highlight highlight-source-js"><pre class="notranslate"><span class="pl-smi">module</span><span class="pl-kos">.</span><span class="pl-c1">exports</span><span class="pl-kos">.</span><span class="pl-c1">config</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
  <span class="pl-c">/** <span class="pl-k">@type</span> {<span class="pl-smi">?ServiceWorkerConfig|boolean</span>} */</span>
  <span class="pl-c1">serviceWorker</span>: <span class="pl-kos">{</span>
    <span class="pl-c1">escape</span>: <span class="pl-c1">1</span><span class="pl-kos">,</span>
    <span class="pl-c1">cacheName</span>: <span class="pl-s">'SolitudeCache'</span><span class="pl-kos">,</span>
    <span class="pl-c1">debug</span>: <span class="pl-c1">false</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-c1">register</span>: <span class="pl-kos">{</span>
    <span class="pl-c1">onsuccess</span>: <span class="pl-c1">undefined</span><span class="pl-kos">,</span>
    <span class="pl-en">onerror</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span>
      <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">error</span><span class="pl-kos">(</span>
        <span class="pl-s">'Service Worker 注册失败！可能是由于您的浏览器不支持该功能！'</span>
      <span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-en">builder</span>: <span class="pl-kos">(</span><span class="pl-s1">root</span><span class="pl-kos">,</span> <span class="pl-s1">framework</span><span class="pl-kos">,</span> <span class="pl-s1">pluginConfig</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
      <span class="pl-k">const</span> <span class="pl-kos">{</span> onerror<span class="pl-kos">,</span> onsuccess <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-s1">pluginConfig</span><span class="pl-kos">.</span><span class="pl-c1">register</span><span class="pl-kos">;</span>
      <span class="pl-k">return</span> <span class="pl-s">`</span>
<span class="pl-s">            &lt;script&gt;</span>
<span class="pl-s">                (() =&gt; {</span>
<span class="pl-s">                    const sw = navigator.serviceWorker;</span>
<span class="pl-s">                    const error = <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">onerror</span> <span class="pl-c1">&amp;&amp;</span> <span class="pl-s1">onerror</span><span class="pl-kos">.</span><span class="pl-en">toString</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">}</span></span>;</span>
<span class="pl-s">                    if (!sw?.register('<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-k">new</span> <span class="pl-c1">URL</span><span class="pl-kos">(</span><span class="pl-s1">root</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-c1">pathname</span><span class="pl-kos">}</span></span>sw.js')</span>
<span class="pl-s">                        <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">onsuccess</span> ? <span class="pl-s">`?.then(<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">onsuccess</span><span class="pl-kos">.</span><span class="pl-en">toString</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">}</span></span>)`</span> : <span class="pl-s">""</span><span class="pl-kos">}</span></span></span>
<span class="pl-s">                        ?.catch(error)</span>
<span class="pl-s">                    ) error()</span>
<span class="pl-s">                })()</span>
<span class="pl-s">            &lt;/script&gt;`</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-c">/** <span class="pl-k">@type</span> {<span class="pl-smi">?DomConfig|boolean</span>} */</span>
  <span class="pl-c1">dom</span>: <span class="pl-kos">{</span>
    <span class="pl-c">/** <span class="pl-k">@type</span> {<span class="pl-smi">?VoidFunction</span>} */</span>
    <span class="pl-en">onsuccess</span>: <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
      <span class="pl-s1">caches</span>
        <span class="pl-kos">.</span><span class="pl-en">match</span><span class="pl-kos">(</span><span class="pl-s">'https://id.v3/'</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">then</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">res</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
          <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">res</span><span class="pl-kos">)</span>
            <span class="pl-s1">res</span><span class="pl-kos">.</span><span class="pl-en">json</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">then</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">json</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
              <span class="pl-s1">utils</span> <span class="pl-c1">&amp;&amp;</span>
                <span class="pl-s1">utils</span><span class="pl-kos">.</span><span class="pl-en">snackbarShow</span><span class="pl-kos">(</span>
                  <span class="pl-s">`已刷新缓存，更新为<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">json</span><span class="pl-kos">.</span><span class="pl-c1">escape</span> <span class="pl-c1">+</span> <span class="pl-s">'.'</span> <span class="pl-c1">+</span> <span class="pl-s1">json</span><span class="pl-kos">.</span><span class="pl-c1">global</span> <span class="pl-c1">+</span> <span class="pl-s">'.'</span> <span class="pl-c1">+</span> <span class="pl-s1">json</span><span class="pl-kos">.</span><span class="pl-c1">local</span></span></span>
<span class="pl-s"><span class="pl-s1">                  <span class="pl-kos">}</span></span>版本最新内容`</span><span class="pl-kos">,</span>
                  <span class="pl-c1">false</span><span class="pl-kos">,</span>
                  <span class="pl-c1">2500</span>
                <span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
          <span class="pl-k">else</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">info</span><span class="pl-kos">(</span><span class="pl-s">'未找到缓存'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-kos">}</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">catch</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">error</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">error</span><span class="pl-kos">(</span><span class="pl-s">'缓存匹配出错'</span><span class="pl-kos">,</span> <span class="pl-s1">error</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-c">/** <span class="pl-k">@type</span> {<span class="pl-smi">?VersionJsonConfig|boolean</span>} */</span>
  <span class="pl-c1">json</span>: <span class="pl-kos">{</span>
    <span class="pl-c">/** <span class="pl-k">@type</span> {<span class="pl-smi">number</span>} */</span>
    <span class="pl-c1">maxHtml</span>: <span class="pl-c1">15</span><span class="pl-kos">,</span>
    <span class="pl-c">/** <span class="pl-k">@type</span> {<span class="pl-smi">number</span>} */</span>
    <span class="pl-c1">charLimit</span>: <span class="pl-c1">1024</span><span class="pl-kos">,</span>
    <span class="pl-c">/** <span class="pl-k">@type</span> {<span class="pl-smi">string[]</span>} */</span>
    <span class="pl-c1">merge</span>: <span class="pl-kos">[</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-c1">exclude</span>: <span class="pl-kos">{</span>
      <span class="pl-c">/** <span class="pl-k">@type</span> {<span class="pl-smi">RegExp[]</span>} */</span>
      <span class="pl-c1">localhost</span>: <span class="pl-kos">[</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
      <span class="pl-c">/** <span class="pl-k">@type</span> {<span class="pl-smi">RegExp[]</span>} */</span>
      <span class="pl-c1">other</span>: <span class="pl-kos">[</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-c">/** <span class="pl-k">@type</span> {<span class="pl-smi">?ExternalMonitorConfig|boolean</span>} */</span>
  <span class="pl-c1">external</span>: <span class="pl-kos">{</span>
    <span class="pl-c">/** <span class="pl-k">@type</span> {<span class="pl-smi">number</span>} */</span>
    <span class="pl-c1">timeout</span>: <span class="pl-c1">5000</span><span class="pl-kos">,</span>
    <span class="pl-c">/** 拉取文件时地并发限制 */</span>
    <span class="pl-c1">concurrencyLimit</span>: <span class="pl-c1">100</span><span class="pl-kos">,</span>
    <span class="pl-c">/** <span class="pl-k">@type</span> {<span class="pl-smi">({head: string, tail: string}|function(string):string[])[]</span>} */</span>
    <span class="pl-c1">js</span>: <span class="pl-kos">[</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-c">/** <span class="pl-k">@type</span> {<span class="pl-smi">RegExp[]</span>} */</span>
    <span class="pl-c1">stable</span>: <span class="pl-kos">[</span>
      <span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">^</span><span class="pl-s">h</span><span class="pl-s">t</span><span class="pl-s">t</span><span class="pl-s">p</span><span class="pl-s">s</span><span class="pl-s">:</span><span class="pl-cce">\/</span><span class="pl-cce">\/</span><span class="pl-s">n</span><span class="pl-s">p</span><span class="pl-s">m</span><span class="pl-cce">\.</span><span class="pl-s">e</span><span class="pl-s">l</span><span class="pl-s">e</span><span class="pl-s">m</span><span class="pl-s">e</span><span class="pl-s">c</span><span class="pl-s">d</span><span class="pl-s">n</span><span class="pl-cce">\.</span><span class="pl-s">c</span><span class="pl-s">o</span><span class="pl-s">m</span><span class="pl-cce">\/</span><span class="pl-kos">[</span><span class="pl-c1">^</span><span class="pl-c1">/</span><span class="pl-c1">@</span><span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">\@</span><span class="pl-kos">[</span><span class="pl-c1">^</span><span class="pl-c1">/</span><span class="pl-c1">@</span><span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">\/</span><span class="pl-kos">[</span><span class="pl-c1">^</span><span class="pl-c1">/</span><span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">\/</span><span class="pl-kos">[</span><span class="pl-c1">^</span><span class="pl-c1">/</span><span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">$</span><span class="pl-c1">/</span></span><span class="pl-kos">,</span>
      <span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">^</span><span class="pl-s">h</span><span class="pl-s">t</span><span class="pl-s">t</span><span class="pl-s">p</span><span class="pl-s">s</span><span class="pl-s">:</span><span class="pl-cce">\/</span><span class="pl-cce">\/</span><span class="pl-s">c</span><span class="pl-s">d</span><span class="pl-s">n</span><span class="pl-cce">\.</span><span class="pl-s">c</span><span class="pl-s">b</span><span class="pl-s">d</span><span class="pl-cce">\.</span><span class="pl-s">i</span><span class="pl-s">n</span><span class="pl-s">t</span><span class="pl-cce">\/</span><span class="pl-kos">[</span><span class="pl-c1">^</span><span class="pl-c1">/</span><span class="pl-c1">@</span><span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">\@</span><span class="pl-kos">[</span><span class="pl-c1">^</span><span class="pl-c1">/</span><span class="pl-c1">@</span><span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">\/</span><span class="pl-kos">[</span><span class="pl-c1">^</span><span class="pl-c1">/</span><span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">\/</span><span class="pl-kos">[</span><span class="pl-c1">^</span><span class="pl-c1">/</span><span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">$</span><span class="pl-c1">/</span></span><span class="pl-kos">,</span>
      <span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">^</span><span class="pl-s">h</span><span class="pl-s">t</span><span class="pl-s">t</span><span class="pl-s">p</span><span class="pl-s">s</span><span class="pl-s">:</span><span class="pl-cce">\/</span><span class="pl-cce">\/</span><span class="pl-s">c</span><span class="pl-s">d</span><span class="pl-s">n</span><span class="pl-cce">\.</span><span class="pl-s">j</span><span class="pl-s">s</span><span class="pl-s">d</span><span class="pl-s">e</span><span class="pl-s">l</span><span class="pl-s">i</span><span class="pl-s">v</span><span class="pl-s">r</span><span class="pl-cce">\.</span><span class="pl-s">n</span><span class="pl-s">e</span><span class="pl-s">t</span><span class="pl-cce">\/</span><span class="pl-s">n</span><span class="pl-s">p</span><span class="pl-s">m</span><span class="pl-cce">\/</span><span class="pl-kos">[</span><span class="pl-c1">^</span><span class="pl-c1">/</span><span class="pl-c1">@</span><span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">\@</span><span class="pl-kos">[</span><span class="pl-c1">^</span><span class="pl-c1">/</span><span class="pl-c1">@</span><span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">\/</span><span class="pl-kos">[</span><span class="pl-c1">^</span><span class="pl-c1">/</span><span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">\/</span><span class="pl-kos">[</span><span class="pl-c1">^</span><span class="pl-c1">/</span><span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">$</span><span class="pl-c1">/</span></span><span class="pl-kos">,</span>
    <span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-en">replacer</span>: <span class="pl-kos">(</span><span class="pl-s1">srcUrl</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
      <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">srcUrl</span><span class="pl-kos">.</span><span class="pl-en">startsWith</span><span class="pl-kos">(</span><span class="pl-s">'https://cdn.jsdelivr.net/npm/'</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-k">const</span> <span class="pl-s1">pathname</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-c1">URL</span><span class="pl-kos">(</span><span class="pl-s1">srcUrl</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-c1">pathname</span><span class="pl-kos">;</span>
        <span class="pl-k">return</span> <span class="pl-kos">[</span>
          <span class="pl-s1">srcUrl</span><span class="pl-kos">,</span>
          <span class="pl-s">`https://cdn.cbd.int/<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">pathname</span><span class="pl-kos">}</span></span>`</span><span class="pl-kos">,</span>
          <span class="pl-s">`https://npm.elemecdn.com/<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">pathname</span><span class="pl-kos">}</span></span>`</span><span class="pl-kos">,</span>
          <span class="pl-s">`https://fastly.jsdelivr.net/npm/<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">pathname</span><span class="pl-kos">}</span></span>`</span><span class="pl-kos">,</span>
        <span class="pl-kos">]</span><span class="pl-kos">;</span>
      <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-s1">srcUrl</span><span class="pl-kos">;</span>
      <span class="pl-kos">}</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-smi">module</span><span class="pl-kos">.</span><span class="pl-c1">exports</span><span class="pl-kos">.</span><span class="pl-c1">cacheRules</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
  <span class="pl-c1">simple</span>: <span class="pl-kos">{</span>
    <span class="pl-c1">clean</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
    <span class="pl-c1">search</span>: <span class="pl-c1">false</span><span class="pl-kos">,</span>
    <span class="pl-en">match</span>: <span class="pl-kos">(</span><span class="pl-s1">url</span><span class="pl-kos">,</span> <span class="pl-s1">$eject</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span>
      <span class="pl-s1">url</span><span class="pl-kos">.</span><span class="pl-c1">host</span> <span class="pl-c1">===</span> <span class="pl-s1">$eject</span><span class="pl-kos">.</span><span class="pl-c1">domain</span> <span class="pl-c1">&amp;&amp;</span> <span class="pl-kos">[</span><span class="pl-s">'/404.html'</span><span class="pl-kos">]</span><span class="pl-kos">.</span><span class="pl-en">includes</span><span class="pl-kos">(</span><span class="pl-s1">url</span><span class="pl-kos">.</span><span class="pl-c1">pathname</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-c1">cdn</span>: <span class="pl-kos">{</span>
    <span class="pl-c1">clean</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
    <span class="pl-en">match</span>: <span class="pl-kos">(</span><span class="pl-s1">url</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span>
      <span class="pl-kos">[</span>
        <span class="pl-s">'cdn.cbd.int'</span><span class="pl-kos">,</span>
        <span class="pl-s">'lf26-cdn-tos.bytecdntp.com'</span><span class="pl-kos">,</span>
        <span class="pl-s">'lf6-cdn-tos.bytecdntp.com'</span><span class="pl-kos">,</span>
        <span class="pl-s">'lf3-cdn-tos.bytecdntp.com'</span><span class="pl-kos">,</span>
        <span class="pl-s">'lf9-cdn-tos.bytecdntp.com'</span><span class="pl-kos">,</span>
        <span class="pl-s">'cdn.staticfile.org'</span><span class="pl-kos">,</span>
        <span class="pl-s">'npm.elemecdn.com'</span><span class="pl-kos">,</span>
      <span class="pl-kos">]</span><span class="pl-kos">.</span><span class="pl-en">includes</span><span class="pl-kos">(</span><span class="pl-s1">url</span><span class="pl-kos">.</span><span class="pl-c1">host</span><span class="pl-kos">)</span> <span class="pl-c1">&amp;&amp;</span>
      <span class="pl-s1">url</span><span class="pl-kos">.</span><span class="pl-c1">pathname</span><span class="pl-kos">.</span><span class="pl-en">match</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">\.</span><span class="pl-kos">(</span><span class="pl-s">j</span><span class="pl-s">s</span><span class="pl-c1">|</span><span class="pl-s">c</span><span class="pl-s">s</span><span class="pl-s">s</span><span class="pl-c1">|</span><span class="pl-s">w</span><span class="pl-s">o</span><span class="pl-s">f</span><span class="pl-s">f</span><span class="pl-s">2</span><span class="pl-c1">|</span><span class="pl-s">w</span><span class="pl-s">o</span><span class="pl-s">f</span><span class="pl-s">f</span><span class="pl-c1">|</span><span class="pl-s">t</span><span class="pl-s">t</span><span class="pl-s">f</span><span class="pl-c1">|</span><span class="pl-s">c</span><span class="pl-s">u</span><span class="pl-s">r</span><span class="pl-kos">)</span><span class="pl-cce">$</span><span class="pl-c1">/</span></span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-smi">module</span><span class="pl-kos">.</span><span class="pl-c1">exports</span><span class="pl-kos">.</span><span class="pl-en">getSpareUrls</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-s1">srcUrl</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">srcUrl</span><span class="pl-kos">.</span><span class="pl-en">startsWith</span><span class="pl-kos">(</span><span class="pl-s">'https://npm.elemecdn.com'</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-k">return</span> <span class="pl-kos">{</span>
      <span class="pl-c1">timeout</span>: <span class="pl-c1">3000</span><span class="pl-kos">,</span>
      <span class="pl-c1">list</span>: <span class="pl-kos">[</span>
        <span class="pl-s1">srcUrl</span><span class="pl-kos">,</span>
        <span class="pl-s">`https://fastly.jsdelivr.net/<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-k">new</span> <span class="pl-c1">URL</span><span class="pl-kos">(</span><span class="pl-s1">srcUrl</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-c1">pathname</span><span class="pl-kos">}</span></span>`</span><span class="pl-kos">,</span>
      <span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">;</span>
  <span class="pl-kos">}</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-smi">module</span><span class="pl-kos">.</span><span class="pl-c1">exports</span><span class="pl-kos">.</span><span class="pl-en">ejectValues</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-s1">hexo</span><span class="pl-kos">,</span> <span class="pl-s1">rules</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-k">return</span> <span class="pl-kos">{</span>
    <span class="pl-c1">domain</span>: <span class="pl-kos">{</span>
      <span class="pl-c1">prefix</span>: <span class="pl-s">'const'</span><span class="pl-kos">,</span>
      <span class="pl-c1">value</span>: <span class="pl-k">new</span> <span class="pl-c1">URL</span><span class="pl-kos">(</span><span class="pl-s1">hexo</span><span class="pl-kos">.</span><span class="pl-c1">config</span><span class="pl-kos">.</span><span class="pl-c1">url</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-c1">host</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-smi">module</span><span class="pl-kos">.</span><span class="pl-c1">exports</span><span class="pl-kos">.</span><span class="pl-en">skipRequest</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-s1">request</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-s1">request</span><span class="pl-kos">.</span><span class="pl-c1">url</span><span class="pl-kos">.</span><span class="pl-en">startsWith</span><span class="pl-kos">(</span><span class="pl-s">"https://i0.hdslb.com"</span><span class="pl-kos">)</span> <span class="pl-c1">||</span>
  <span class="pl-s1">request</span><span class="pl-kos">.</span><span class="pl-c1">url</span><span class="pl-kos">.</span><span class="pl-en">startsWith</span><span class="pl-kos">(</span><span class="pl-s">'https://meting.qjqq.cn'</span><span class="pl-kos">)</span> <span class="pl-c1">||</span>
  <span class="pl-s1">request</span><span class="pl-kos">.</span><span class="pl-c1">url</span><span class="pl-kos">.</span><span class="pl-en">startsWith</span><span class="pl-kos">(</span><span class="pl-s">'https://api.i-meto.com'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<hr>
<ol start="5">
<li><strong><a href="https://github.com/hexojs/hexo-deployer-git">hexo-deploy-git</a></strong> 提交到git的插件</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm i hexo-deploy-git --save</pre></div>
<hr>
<ol start="6">
<li><strong><a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a></strong> hexo的rss插件</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm i hexo-generator-feed --save</pre></div>
<hr>
<ol start="7">
<li><strong><a href="https://github.com/ohroy/hexo-abbrlink">hexo 的短链接</a></strong>: <code class="notranslate">hexo-abbrlink</code></li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm i hexo-abbrlink --save</pre></div>
<p>在<code class="notranslate">_config.yml</code>里修改：</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-ent">permalink</span>: <span class="pl-s">posts/:abbrlink/ </span>
<span class="pl-c"><span class="pl-c">#</span> or</span>
<span class="pl-ent">permalink</span>: <span class="pl-s">posts/:abbrlink.html</span></pre></div>
<p>添加:</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> abbrlink config</span>
<span class="pl-ent">abbrlink</span>:
  <span class="pl-ent">alg</span>: <span class="pl-s">crc32      </span><span class="pl-c"><span class="pl-c">#</span> Algorithm used to calc abbrlink. Support crc16(default) and crc32</span>
  <span class="pl-ent">rep</span>: <span class="pl-s">hex        </span><span class="pl-c"><span class="pl-c">#</span> Representation of abbrlink in URLs. Support dec(default) and hex</span>
  <span class="pl-ent">drafts</span>: <span class="pl-s">false   </span><span class="pl-c"><span class="pl-c">#</span> Whether to generate abbrlink for drafts. (false in default)</span>
  <span class="pl-ent">force</span>: <span class="pl-s">false    </span><span class="pl-c"><span class="pl-c">#</span> Enable force mode. In this mode, the plugin will ignore the cache, and calc the abbrlink for every post even it already had an abbrlink. (false in default)</span>
  <span class="pl-ent">writeback</span>: <span class="pl-s">true </span><span class="pl-c"><span class="pl-c">#</span> Whether to write changes to front-matters back to the actual markdown files. (true in default)</span></pre></div>
<hr>
<ol start="8">
<li><strong><a href="https://github.com/hexojs/hexo-generator-sitemap">博客的sitemap</a></strong> : <code class="notranslate">hexo-generator-sitemap</code></li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm i hexo-generator-sitemap --save</pre></div>
<p>在<code class="notranslate">_config.yml</code>里添加配置：</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-ent">sitemap</span>:
  <span class="pl-ent">path</span>: 
    - <span class="pl-s">sitemap.xml</span>
    - <span class="pl-s">sitemap.txt</span>
  <span class="pl-ent">template</span>: <span class="pl-s">./sitemap_template.xml</span>
  <span class="pl-ent">template_txt</span>: <span class="pl-s">./sitemap_template.txt</span>
  <span class="pl-ent">rel</span>: <span class="pl-c1">false</span>
  <span class="pl-ent">tags</span>: <span class="pl-c1">true</span>
  <span class="pl-ent">categories</span>: <span class="pl-c1">true</span></pre></div>
<hr>
<ol start="9">
<li><a href="https://www.mebi.me/hexo-with-algolia" rel="nofollow"><strong>使用algolia搜索</strong></a> : <code class="notranslate">hexo-algoliasearch</code></li>
</ol>
<ul>
<li>注册algolia：</li>
</ul>
<p>注册地址：<a href="https://dashboard.algolia.com/users/sign_up" rel="nofollow">dashboard.algolia.com/users/sign_up</a></p>
<ul>
<li>创建应用：</li>
</ul>
<p>注册成功后创建应用：<a href="https://dashboard.algolia.com/account/plan/create?from=dashboard" rel="nofollow">dashboard.algolia.com/account/plan/create?from=dashboard</a></p>
<ul>
<li>search -&gt; configure -&gt; index添加index_name即可</li>
</ul>
<p>在博客执行命令：</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm i hexo-algoliasearch --save</pre></div>
<p><code class="notranslate">_config.yml</code>里添加</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-ent">algolia</span>:
  <span class="pl-ent">appId</span>: <span class="pl-s"><span class="pl-pds">"</span>Z7A3XW4R2I<span class="pl-pds">"</span></span>
  <span class="pl-ent">apiKey</span>: <span class="pl-s"><span class="pl-pds">"</span>12db1ad54372045549ef465881c17e743<span class="pl-pds">"</span></span>
  <span class="pl-ent">adminApiKey</span>: <span class="pl-s"><span class="pl-pds">"</span>40321c7c207e7f73b63a19aa24c4761b<span class="pl-pds">"</span></span>
  <span class="pl-ent">chunkSize</span>: <span class="pl-c1">5000</span>
  <span class="pl-ent">indexName</span>: <span class="pl-s"><span class="pl-pds">"</span>my-hexo-blog<span class="pl-pds">"</span></span>
  <span class="pl-ent">fields</span>:
    - <span class="pl-s">content:strip:truncate,0,500</span>
    - <span class="pl-s">excerpt:strip</span>
    - <span class="pl-s">gallery</span>
    - <span class="pl-s">permalink</span>
    - <span class="pl-s">photos</span>
    - <span class="pl-s">slug</span>
    - <span class="pl-s">tags</span>
    - <span class="pl-s">title</span></pre></div>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>
<p><strong>!!!配置完成后记得运行 <code class="notranslate">hexo clean</code></strong></p>
</div>
<p>在<code class="notranslate">hexo g </code>后实行下列代码：</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">hexo algolia</pre></div>
<hr>
<ol start="10">
<li>**<a href="https://blog.liushen.fun/posts/1dfd1f41/" rel="nofollow">hexo-safego</a>**安全跳转插件</li>
</ol>
<p>使用该插件之前，需要先安装 <code class="notranslate">cheerio</code>，<code class="notranslate">cheerio</code> 是一个轻量级的库，用于在服务器端快速、灵活地实现 jQuery 核心功能。在 <code class="notranslate">hexo-safego</code> 插件中，<code class="notranslate">cheerio</code> 被用来解析和操作生成的静态 HTML 内容，类似于在浏览器中使用 jQuery 处理 DOM 元素。这使得插件能够在生成静态页面时，处理和替换外部链接，增强博客的安全性，而不需要在客户端引入 jQuery。Hexo 一般都有这个插件，可以在 <code class="notranslate">node_modules</code> 查看，如果没有，请先执行：</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm i cheerio --save</pre></div>
<p>然后即可安装该插件：</p>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm i hexo-safego --save</pre></div>
<p>在<code class="notranslate">hexo</code>根目录的<code class="notranslate">_config.yml</code>文件中添加以下配置：</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> hexo-safego安全跳转插件</span>
<span class="pl-c"><span class="pl-c">#</span> see https://blog.liushen.fun/posts/1dfd1f41/</span>
<span class="pl-ent">hexo_safego</span>:
  <span class="pl-c"><span class="pl-c">#</span> 基本功能设置</span>
  <span class="pl-ent">general</span>:
    <span class="pl-ent">enable</span>: <span class="pl-s">true                </span><span class="pl-c"><span class="pl-c">#</span> 启用插件</span>
    <span class="pl-ent">enable_base64_encode</span>: <span class="pl-s">true  </span><span class="pl-c"><span class="pl-c">#</span> 使用 Base64 编码</span>
    <span class="pl-ent">enable_target_blank</span>: <span class="pl-s">true   </span><span class="pl-c"><span class="pl-c">#</span> 打开新窗口</span>
  <span class="pl-c"><span class="pl-c">#</span> 安全设置</span>
  <span class="pl-ent">security</span>:
    <span class="pl-ent">url_param_name</span>: <span class="pl-s"><span class="pl-pds">'</span>u<span class="pl-pds">'</span></span>         <span class="pl-c"><span class="pl-c">#</span> URL 参数名</span>
    <span class="pl-ent">html_file_name</span>: <span class="pl-s"><span class="pl-pds">'</span>go.html<span class="pl-pds">'</span></span>   <span class="pl-c"><span class="pl-c">#</span> 重定向页面的文件名</span>
    <span class="pl-ent">ignore_attrs</span>:               <span class="pl-c"><span class="pl-c">#</span> 忽略处理的 HTML 属性</span>
      - <span class="pl-s"><span class="pl-pds">'</span>data-fancybox<span class="pl-pds">'</span></span>
  <span class="pl-c"><span class="pl-c">#</span> 容器与页面设置</span>
  <span class="pl-ent">scope</span>:
    <span class="pl-ent">apply_containers</span>:           <span class="pl-c"><span class="pl-c">#</span> 应用的容器选择器</span>
      - <span class="pl-s"><span class="pl-pds">'</span>#article-container<span class="pl-pds">'</span></span>
    <span class="pl-ent">apply_pages</span>:                <span class="pl-c"><span class="pl-c">#</span> 应用的页面路径</span>
      - <span class="pl-s"><span class="pl-pds">"</span>/posts/<span class="pl-pds">"</span></span>
      - <span class="pl-s"><span class="pl-pds">"</span>/devices/<span class="pl-pds">"</span></span>
    <span class="pl-ent">exclude_pages</span>:              <span class="pl-c"><span class="pl-c">#</span> 排除的页面路径</span>
  <span class="pl-c"><span class="pl-c">#</span> 域名白名单</span>
  <span class="pl-ent">whitelist</span>:
    <span class="pl-ent">domain_whitelist</span>:           <span class="pl-c"><span class="pl-c">#</span> 允许的白名单域名</span>
      - <span class="pl-s"><span class="pl-pds">"</span>qyliu.top<span class="pl-pds">"</span></span>
      - <span class="pl-s"><span class="pl-pds">"</span>liushen.fun<span class="pl-pds">"</span></span>
  <span class="pl-c"><span class="pl-c">#</span> 页面外观设置</span>
  <span class="pl-ent">appearance</span>:
    <span class="pl-ent">avatar</span>: <span class="pl-s">/info/avatar.ico    </span><span class="pl-c"><span class="pl-c">#</span> 头像路径</span>
    <span class="pl-ent">title</span>: <span class="pl-s"><span class="pl-pds">"</span>清羽飞扬<span class="pl-pds">"</span></span>            <span class="pl-c"><span class="pl-c">#</span> 页面标题</span>
    <span class="pl-ent">subtitle</span>: <span class="pl-s"><span class="pl-pds">"</span>安全中心<span class="pl-pds">"</span></span>         <span class="pl-c"><span class="pl-c">#</span> 页面副标题</span>
    <span class="pl-ent">darkmode</span>: <span class="pl-s">true              </span><span class="pl-c"><span class="pl-c">#</span> 是否启用深色模式</span>
    <span class="pl-ent">countdowntime</span>: <span class="pl-c1">-1</span>           <span class="pl-c"><span class="pl-c">#</span> 倒计时秒数</span>
  <span class="pl-c"><span class="pl-c">#</span> 调试设置</span>
  <span class="pl-ent">debug</span>:
    <span class="pl-ent">enable</span>: <span class="pl-s">false               </span><span class="pl-c"><span class="pl-c">#</span> 启用调试模式</span></pre></div>
<ol start="11">
<li><strong>hexo的追番页面</strong>：<a href="https://github.com/HCLonely/hexo-bilibili-bangumi">hexo-bilibili-bangumi</a></li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">pnpm i hexo-bilibili-bangumi --save</pre></div>
<p>在<code class="notranslate">_config.yml</code>配置：</p>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-ent">bangumi</span>: <span class="pl-c"><span class="pl-c">#</span> 追番设置</span>
  <span class="pl-ent">enable</span>: <span class="pl-s">true           </span><span class="pl-c"><span class="pl-c">#</span> 是否启用</span>
  <span class="pl-ent">source</span>: <span class="pl-s">bili          </span><span class="pl-c"><span class="pl-c">#</span> 数据源</span>
  <span class="pl-ent">path</span>: <span class="pl-s">bangumis/index.html  </span><span class="pl-c"><span class="pl-c">#</span> 页面路径</span>
  <span class="pl-ent">vmid</span>:                 <span class="pl-c"><span class="pl-c">#</span> 用户ID</span>
  <span class="pl-ent">title</span>: <span class="pl-s"><span class="pl-pds">'</span>追番列表<span class="pl-pds">'</span></span>      <span class="pl-c"><span class="pl-c">#</span> 页面标题</span>
  <span class="pl-ent">quote</span>: <span class="pl-s"><span class="pl-pds">'</span>生命不息，追番不止！<span class="pl-pds">'</span></span> <span class="pl-c"><span class="pl-c">#</span> 页面引言</span>
  <span class="pl-ent">show</span>: <span class="pl-c1">1</span>              <span class="pl-c"><span class="pl-c">#</span> 初始显示页面: 0=想看, 1=在看, 2=看过</span>
  <span class="pl-ent">lazyload</span>: <span class="pl-s">true       </span><span class="pl-c"><span class="pl-c">#</span> 是否启用图片懒加载</span>
  <span class="pl-ent">metaColor</span>:           <span class="pl-c"><span class="pl-c">#</span> meta 信息字体颜色</span>
  <span class="pl-ent">color</span>:               <span class="pl-c"><span class="pl-c">#</span> 简介字体颜色</span>
  <span class="pl-ent">webp</span>: <span class="pl-s">true          </span><span class="pl-c"><span class="pl-c">#</span> 是否使用 webp 格式图片</span>
  <span class="pl-ent">progress</span>: <span class="pl-s">true      </span><span class="pl-c"><span class="pl-c">#</span> 是否显示进度条</span>
  <span class="pl-s">...</span>
<span class="pl-ent">cinema</span>: <span class="pl-c"><span class="pl-c">#</span> 追剧设置</span>
  <span class="pl-ent">enable</span>: <span class="pl-s">true           </span><span class="pl-c"><span class="pl-c">#</span> 是否启用</span>
  <span class="pl-ent">source</span>: <span class="pl-s">bili</span>
  <span class="pl-s">...</span>
<span class="pl-ent">game</span>: <span class="pl-c"><span class="pl-c">#</span> 游戏设置，仅支持source: bgmv0</span>
  <span class="pl-ent">enable</span>: <span class="pl-s">true           </span><span class="pl-c"><span class="pl-c">#</span> 是否启用</span>
  <span class="pl-ent">source</span>: <span class="pl-s">bgmv0</span>
  <span class="pl-s">...</span></pre></div>
<p>还在更新中。。。</p>
<hr>
<h2>Github action配置</h2>
<p>承接<a href="#github-config">段落</a>的继续吧，未来会在<del>出</del>水一期。</p>
<p>接下来就是创建一个私有仓库，根据大佬的文章，是为了保护<strong>Token</strong>，见仁见智。</p>
<p>这个私有仓库的建立是存储Hexo博客代码，如果你要使用<a href="https://github.com/Qexo/Qexo">Qexo</a></p>
<p>，这也是必不可少的！</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/0cb24664151d282981ece516a9438864f039dd69ed67d9e145a63c3a86af8ecb/68747470733a2f2f696d672e3331343932362e78797a2f696d616765732f323032352f30382f31392f6865786f2d62656977616e67312e77656270"><img src="https://camo.githubusercontent.com/0cb24664151d282981ece516a9438864f039dd69ed67d9e145a63c3a86af8ecb/68747470733a2f2f696d672e3331343932362e78797a2f696d616765732f323032352f30382f31392f6865786f2d62656977616e67312e77656270" alt="" data-canonical-src="https://img.314926.xyz/images/2025/08/19/hexo-beiwang1.webp" style="max-width: 100%;"></a></p>
<p>创建完成后，需要把博客的源码 push 到这里。首先获取远程仓库地址，此处虽然 SSH 和 HTTPS 均可。SSH 在绑定过 ssh key 的设备上无需再输入密码，HTTPS 则需要输入密码，但是 SSH 偶尔会遇到端口占用的情况。请自主选择。</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/3e041fb4c6f4e1438bf58c532490d141977c57acb2ae8abfddf732b5ba7a97b6/68747470733a2f2f696d672e3331343932362e78797a2f696d616765732f323032352f30382f31392f6865786f2d62656977616e67322e77656270"><img src="https://camo.githubusercontent.com/3e041fb4c6f4e1438bf58c532490d141977c57acb2ae8abfddf732b5ba7a97b6/68747470733a2f2f696d672e3331343932362e78797a2f696d616765732f323032352f30382f31392f6865786f2d62656977616e67322e77656270" alt="" data-canonical-src="https://img.314926.xyz/images/2025/08/19/hexo-beiwang2.webp" style="max-width: 100%;"></a></p>
<div class="markdown-alert markdown-alert-tip"><p class="markdown-alert-title"><svg class="octicon octicon-light-bulb mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</p>
<p>这里之所以是私有仓库，是因为在接下来的配置中会用到 <code class="notranslate">Token</code>，如果 <code class="notranslate">Token</code> 被盗用，别人可以肆意操作你的 github 仓库内容，为了避免这一风险，才选择的博客源码闭源。</p>
</div>
<h3>配置 Github Action</h3>
<ol>
<li>在<code class="notranslate">[Blogroot]</code>新建<code class="notranslate">.github</code>文件夹,注意开头是有个<code class="notranslate">.</code>的。然后在<code class="notranslate">.github</code> 内新建 <code class="notranslate">workflows</code> 文件夹，再在 <code class="notranslate">workflows</code> 文件夹内新建 <code class="notranslate">autodeploy.yml</code>,在<code class="notranslate">[Blogroot]/.github/workflows/autodeploy.yml</code> 里面输入</li>
</ol>
<div class="highlight highlight-source-yaml"><pre class="notranslate"><span class="pl-c"><span class="pl-c">#</span> 当有改动推送到 main 分支时，启动 Action</span>
<span class="pl-ent">name</span>: <span class="pl-s">自动部署</span>

<span class="pl-ent">on</span>:
  <span class="pl-ent">push</span>:
    <span class="pl-ent">branches</span>:
      - <span class="pl-s">main </span><span class="pl-c"><span class="pl-c">#</span> 自选分支</span>

  <span class="pl-ent">release</span>:
    <span class="pl-ent">types</span>:
      - <span class="pl-s">published</span>

<span class="pl-ent">jobs</span>:
  <span class="pl-ent">deploy</span>:
    <span class="pl-ent">runs-on</span>: <span class="pl-s">ubuntu-latest</span>
    <span class="pl-ent">steps</span>:
      - <span class="pl-ent">name</span>: <span class="pl-s">检查分支</span>
        <span class="pl-ent">uses</span>: <span class="pl-s">actions/checkout@v4</span>
        <span class="pl-ent">with</span>:
          <span class="pl-ent">ref</span>: <span class="pl-s">main </span><span class="pl-c"><span class="pl-c">#</span> 自选分支</span>

      - <span class="pl-ent">name</span>: <span class="pl-s">安装 Node</span>
        <span class="pl-ent">uses</span>: <span class="pl-s">actions/setup-node@v4</span>
        <span class="pl-ent">with</span>:
          <span class="pl-ent">node-version</span>: <span class="pl-s"><span class="pl-pds">"</span>22.x<span class="pl-pds">"</span></span> <span class="pl-c"><span class="pl-c">#</span> node版本</span>

      - <span class="pl-ent">name</span>: <span class="pl-s">安装 Hexo</span>
        <span class="pl-ent">run</span>: <span class="pl-s">|</span>
<span class="pl-s">          export TZ='Asia/Shanghai'</span>
<span class="pl-s">          npm install hexo-cli -g</span>
<span class="pl-s">          npm install yamljs --save</span>
<span class="pl-s"></span>
<span class="pl-s"></span>      - <span class="pl-ent">name</span>: <span class="pl-s">缓存 Hexo</span>
        <span class="pl-ent">uses</span>: <span class="pl-s">actions/cache@v4</span>
        <span class="pl-ent">id</span>: <span class="pl-s">cache</span>
        <span class="pl-ent">with</span>:
          <span class="pl-ent">path</span>: <span class="pl-s">node_modules</span>
          <span class="pl-ent">key</span>: <span class="pl-s">${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}</span>

      - <span class="pl-ent">name</span>: <span class="pl-s">安装依赖</span>
        <span class="pl-ent">if</span>: <span class="pl-s">steps.cache.outputs.cache-hit != 'true'</span>
        <span class="pl-ent">run</span>: <span class="pl-s">|</span>
<span class="pl-s">          npm install --save</span>
<span class="pl-s">          npm install hexo-algoliasearch --save</span>
<span class="pl-s">          npm install hexo-bilibili-bangumi --save</span>
<span class="pl-s"></span>
<span class="pl-s"></span>      - <span class="pl-ent">name</span>: <span class="pl-s">生成静态文件</span>
        <span class="pl-ent">run</span>: <span class="pl-s">|</span>
<span class="pl-s">          node ./link.js</span>
<span class="pl-s">          hexo clean</span>
<span class="pl-s">          hexo generate</span>
<span class="pl-s">          hexo bangumi -u</span>
<span class="pl-s">          hexo algolia</span>
<span class="pl-s"></span>
<span class="pl-s"></span>      - <span class="pl-ent">name</span>: <span class="pl-s">部署</span>
        <span class="pl-ent">run</span>: <span class="pl-s">|</span>
<span class="pl-s">          cd ./public</span>
<span class="pl-s">          git init -b main</span>
<span class="pl-s">          git config --global user.name '${{ secrets.GITHUBUSERNAME }}'</span>
<span class="pl-s">          git config --global user.email '${{ secrets.GITHUBEMAIL }}'</span>
<span class="pl-s">          git add .</span>
<span class="pl-s">          git commit -m "${{ github.event.head_commit.message }} $(date +"%Z %Y-%m-%d %A %H:%M:%S") Updated by GitHub Actions"</span>
<span class="pl-s">          git push --force --quiet "https://${{ secrets.GITHUBUSERNAME }}:${{ secrets.GITHUBTOKEN }}@github.com/${{ secrets.GITHUBUSERNAME }}/${{ secrets.GITHUBUSERNAME }}.github.io.git" main</span></pre></div>
<p>上述代码是来自<a href="https://akilar.top/posts/f752c86d/" rel="nofollow">店长</a>的修改自用，为什么不用<a href="https://blog.anheyu.com/posts/asdx.html" rel="nofollow">安知鱼</a>的？</p>
<ol>
<li>
<p>首先把Token直接放在仓库的文件里还是不太好。</p>
</li>
<li>
<p>像我这种在本地搞的，推不到仓库里，因为这里的token不能直接上传，我尝试过把<code class="notranslate">token: </code>改成<code class="notranslate">token: ${{ servets.GH_token }}</code>，但是依旧有各种问题，相反使用了店长的代码后，就大差不差，询问AI后就得到目前的代码，也就可以正式上传了。（无拉踩的意思）</p>
</li>
<li>
<p>之后需要自己到仓库的 Settings-&gt;Secrets-&gt;actions 下添加环境变量，变量名参考脚本中出现的，依次添加。</p>
</li>
</ol>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/350c0afeda2461b5d8dca039b4254534f3f82ed33f3d1ede2353d4cb2f98a2cb/68747470733a2f2f696d672e3331343932362e78797a2f696d616765732f323032352f30382f31392f6865786f2d62656977616e67332e77656270"><img src="https://camo.githubusercontent.com/350c0afeda2461b5d8dca039b4254534f3f82ed33f3d1ede2353d4cb2f98a2cb/68747470733a2f2f696d672e3331343932362e78797a2f696d616765732f323032352f30382f31392f6865786f2d62656977616e67332e77656270" alt="" data-canonical-src="https://img.314926.xyz/images/2025/08/19/hexo-beiwang3.webp" style="max-width: 100%;"></a></p>
<h3>重新设置远程仓库和分支</h3>
<details>
    <summary>
        
            
        
        🍼第一次使用git管理博客源码
    </summary>
    <div>
        <ol>
            <li>
                删除或者先把<code class="notranslate">[Blogroot]/themes/solitude/.git</code>移动到非博客文件夹目录下,原因是主题文件夹下的<code class="notranslate">.git</code>文件夹的存在会导致其被识别成子项目，从而无法被上传到源码仓库。
            </li>
            <li>
                在博客根目录<code class="notranslate">[Blogroot]</code>路径下运行指令:
                <pre class="notranslate"><code class="notranslate">git init #初始化
git remote add origin git@github.com:[GithubUsername]/[SourceRepo].git #[SourceRepo]为存放源码的github私有仓库
git checkout -b master # 切换到master分支，
#2020年10月后github新建仓库默认分支改为main，注意更改
# 如果不是，后面的所有设置的分支记得保持一致</code></pre>
            </li>
            <li>
                添加屏蔽项
                因为能够使用指令进行安装的内容不包括在需要提交的源码内，所有我们需要将这些内容添加到屏蔽项，表示不上传到 github 上。这样可以显著减少需要提交的文件量和加快提交速度。打开<code class="notranslate">[Blogroot]/.gitignore</code>,输入以下内容：
                <pre class="notranslate"><code class="notranslate">.DS_Store
Thumbs.db
db.json
*.log
node_modules/
public/
.deploy*/
.deploy_git*/
.idea
themes/solitude/.git</code></pre>
                如果不是<code class="notranslate">solitude</code>主题，记得替换最后一行内容为你自己当前使用的主题。
            </li>
            <li>
                之后再运行 git 提交指令，将博客源码提交到 github 上。
                <pre class="notranslate"><code class="notranslate">git add .
git commit -m "github action update"
git push origin master
#2020年10月后github新建仓库默认分支改为main，注意更改</code></pre>
            </li>
            <li>
                此时你的主题文件夹若已经被正常上传，并且你也添加了主题文件夹下的.git 文件夹的屏蔽项。那你可以考虑把第二步移走或删除的<code class="notranslate">.git</code>放回来，用作以后升级。（不禁怀疑真的有人会去用这个方式来升级吗）
            </li>
        </ol>
    </div>
</details>
<details>
    <summary>
        
            
        
         🍾曾经做过git管理源码的操作
    </summary>
    <div>
        <ol>
            <li>
                添加屏蔽项
                <pre class="notranslate"><code class="notranslate">.DS_Store
Thumbs.db
db.json
*.log
node_modules/
public/
.deploy*/
.deploy_git*/
.idea
themes/solitude/.git</code></pre>
                如果不是<code class="notranslate">solitude</code>主题，记得替换最后一行内容为你自己当前使用的主题。
            </li>
            <li>
                提交源码到私有仓库<code class="notranslate">[SourceRepo]</code>在博客根目录<code class="notranslate">[Blogroot]</code>下启动终端，使用 git 指令重设仓库地址。这样在新建仓库，我们仍旧可以保留珍贵的 commit history，便于版本回滚。
                <pre class="notranslate"><code class="notranslate">git remote rm origin # 删除原有仓库链接
git remote add origin git@github.com:[GithubUsername]/[SourceRepo].git #[SourceRepo]为新的存放源码的github私有仓库
git checkout -b master # 切换到master分支，
#2020年10月后github新建仓库默认分支改为main，注意更改
# 如果不是，后面的所有设置的分支记得保持一致
git add .
git commit -m "github action update"
git push origin master
#2020年10月后github新建仓库默认分支改为main，注意更改</code></pre>
            </li>
            <li>
                可能遇到的 bug
                具体bug千奇百怪，不懂问AI/别的大佬
                因为主题文件夹下的.git 文件夹的存在，那么主题文件夹会被识别子项目。从而无法被上传到源码仓库。若是遇到添加屏蔽项，但是还是无法正常上传主题文件夹的情况。请先将本地源码中的 themes 文件夹移动到别的目录下。然后 commit 一次。接着将 themes 文件夹移动回来，再 commit 一次。
                <div>
                    <strong>注意：</strong> 要是还不行，那就删了 solitude 主题文件夹下的.git 文件夹，然后再重复上述的 commit 操作。
                </div>
            </li>
        </ol>
    </div>
</details>
<h1>挖坑</h1>
<p>大致写到这，未来或许会有<del>下一章</del>挖坑？但是目前通用的就到这，然后后续会写Qexo的简单使用方法、solitude的一些配置更改和我踩坑经历吧。</p></div>
<div style="font-size:small;margin-top:8px;float:right;">转载请注明出处</div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">评论</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://Kemiaojun.github.io">喵落阁</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if("05/09/2025"!=""){
    var startSite=new Date("05/09/2025");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="网站运行"+diffDay+"天"+" • ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z', 'copy': 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z', 'check': 'M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","Kemiaojun/Kemiaojun.github.io");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const createClipboardHTML = (codeContent, additionalClasses = '') => `
        <pre class="notranslate"><code class="notranslate">${codeContent}</code></pre>
        <div class="clipboard-container position-absolute right-0 top-0 ${additionalClasses}">
            <clipboard-copy class="ClipboardButton btn m-2 p-0" role="button" style="display: inherit;">
                <svg height="16" width="16" class="octicon octicon-copy m-2"><path d="${IconList["copy"]}"></path></svg>
                <svg height="16" width="16" class="octicon octicon-check color-fg-success m-2 d-none"><path d="${IconList["check"]}"></path></svg>
            </clipboard-copy>
            <div class="copy-feedback">Copied!</div>
        </div>
    `;

    const handleCodeElements = (selector = '') => {
        document.querySelectorAll(selector).forEach(codeElement => {
            const codeContent = codeElement.innerHTML;
            const newStructure = document.createElement('div');
            newStructure.className = 'snippet-clipboard-content position-relative overflow-auto';
            newStructure.innerHTML = createClipboardHTML(codeContent);

            const parentElement = codeElement.parentElement;
            if (selector.includes('highlight')) {
                parentElement.insertBefore(newStructure, codeElement.nextSibling);
                parentElement.removeChild(codeElement);
            } else {
                parentElement.parentElement.replaceChild(newStructure, parentElement);
            }
        });
    };

    handleCodeElements('pre.notranslate > code.notranslate');
    handleCodeElements('div.highlight > pre.notranslate');

    let currentFeedback = null;
    document.querySelectorAll('clipboard-copy').forEach(copyButton => {
        copyButton.addEventListener('click', () => {
            const codeContent = copyButton.closest('.snippet-clipboard-content').innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = codeContent;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            const copyIcon = copyButton.querySelector('.octicon-copy');
            const checkIcon = copyButton.querySelector('.octicon-check');
            const copyFeedback = copyButton.nextElementSibling;

            if (currentFeedback && currentFeedback !== copyFeedback) {currentFeedback.style.display = 'none';}
            currentFeedback = copyFeedback;

            copyIcon.classList.add('d-none');
            checkIcon.classList.remove('d-none');
            copyFeedback.style.display = 'block';
            copyButton.style.borderColor = 'var(--color-success-fg)';

            setTimeout(() => {
                copyIcon.classList.remove('d-none');
                checkIcon.classList.add('d-none');
                copyFeedback.style.display = 'none';
                copyButton.style.borderColor = '';
            }, 2000);
        });
    });
});

</script>
<script src='https://source.314926.xyz/assets/GmeekTOC.js'></script><script src='https://source.314926.xyz/assets/lightbox.js'></script>

</html>
